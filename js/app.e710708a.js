(function(e){function t(t){for(var o,a,r=t[0],c=t[1],u=t[2],k=0,h=[];k<r.length;k++)a=r[k],s[a]&&h.push(s[a][0]),s[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},s={app:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("1356"),s=n.n(o);s.a},1356:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("div",{ref:"main",style:{backgroundColor:e.bgColor,height:e.height},attrs:{id:"app"},on:{touchstart:e.onStart,touchmove:e.onMove,touchend:e.onTouch}}),n("p",[e._v(e._s(e.wakeLockStatus))]),n("settings")],1)},i=[],a=n("cebc"),r=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{ref:"settings",staticClass:"form-wrapper",class:!e.isSettingVisible&&"hidden"},[n("form",[n("v-label",{attrs:{dark:e.isDark}},[e._v("wakelock time limit")]),n("v-slider",{attrs:{"thumb-label":"always","thumb-size":22,dark:e.isDark,max:"30"},model:{value:e.wakeLockDuration,callback:function(t){e.wakeLockDuration=t},expression:"wakeLockDuration"}})],1),e.isSettingVisible?n("v-btn",{attrs:{depressed:"",round:"",large:"",dark:!e.isDark},on:{click:e.showSettings}},[e._v("hide settings\n  ")]):e._e(),e.isSettingVisible?e._e():n("v-btn",{attrs:{depressed:"",round:"",large:"",dark:!e.isDark},on:{click:e.showSettings}},[e._v("show settings\n  ")])],1)},u=[],l=n("e814"),k=n.n(l),h={name:"app",data:function(){return{isSettingVisible:!1,isFullScreen:!1}},computed:{wakeLockDuration:{get:function(){return this.$store.state.wakeLockDuration},set:function(e){this.$store.dispatch("saveWakeLockDuration",e)}},isDark:function(){return k()(this.$store.state.lightness,10)<40}},methods:{setFullScreen:function(){document.fullscreenElement||document.webkitFullscreenElement?document.exitFullscreen():(document.body.requestFullscreen(),this.isFullScreen=!0)},showSettings:function(){this.isSettingVisible=!this.isSettingVisible}}},f=h,d=(n("5af7"),n("2877")),g=n("6544"),p=n.n(g),v=n("8336"),m=n("a523"),L=n("24c9"),w=n("ba0d"),b=Object(d["a"])(f,c,u,!1,null,"614fb1e0",null),S=b.exports;p()(b,{VBtn:v["a"],VContainer:m["a"],VLabel:L["a"],VSlider:w["a"]});var W={name:"app",components:{settings:S},data:function(){return{startX:0,startY:0,isFaded:!1,height:"100vh"}},computed:Object(a["a"])({},Object(r["b"])(["hue","lightness","wakeLockDuration","wakeLockStatus"]),{bgColor:function(){return this.$store.getters.bgColor}}),methods:{onStart:function(e){this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY},onMove:function(e){var t=this.$store.state.hue,n=this.$store.state.lightness,o=e.changedTouches[0].clientY,s=e.changedTouches[0].clientX,i=Math.abs(o-this.startY),a=Math.abs(s-this.startX);i>0&&a<10&&(o<this.startY?(console.debug("up"),n+=.2*i):(console.debug("down"),n-=.2*i)),a>0&&i<10&&(s>this.startX?t+=.2*a:t-=.2*a),this.startY=o,this.startX=s,this.$store.dispatch("saveHue",t),this.$store.dispatch("saveLightness",n)},onTouch:function(){this.shine(),this.startWL()},startWL:function(){this.$store.dispatch("startWL"),this.fade()},fade:function(){var e=this;window.setTimeout(function(){e.$store.commit("setLightness",.8*e.lightness),e.isFaded=!0},.8*this.wakeLockDuration*60*1e3)},shine:function(){this.$refs.main.style.opacity=1,this.isFaded=!1}},mounted:function(){this.$store.dispatch("loadSettings"),this.height=window.innerHeight,this.startWL()}},O=W,D=(n("034f"),n("7496")),y=Object(d["a"])(O,s,i,!1,null,null,null),T=y.exports;p()(y,{VApp:D["a"]});var _={DURATION:"light-duration",HUE:"light-hue",LIGHTNESS:"light-lightness"};o["default"].use(r["a"]);var j=new r["a"].Store({state:{wakeLock:null,wakeLockStatus:"",wakeLockDuration:30,wakeLockRequest:null,wakeLockTimeOut:null,hue:46,lightness:70},getters:{bgColor:function(e){return"hsl(".concat(e.hue,", 100%, ").concat(e.lightness,"%)")}},mutations:{setWakeLock:function(e,t){e.wakeLock=t},setWakeLockRequest:function(e,t){e.wakeLockRequest=t},setWakeLockStatus:function(e,t){e.wakeLockStatus=t},setWakeLockDuration:function(e,t){e.wakeLockDuration=t},setHue:function(e,t){e.hue=t},setLightness:function(e,t){e.lightness=t},setWakeLockTimeOut:function(e,t){e.wakeLockTimeOut=t}},actions:{saveHue:function(e,t){var n=e.commit;n("setHue",t),localStorage.setItem(_.HUE,t)},saveLightness:function(e,t){var n=e.commit;n("setLightness",t),localStorage.setItem(_.LIGHTNESS,t)},saveWakeLockDuration:function(e,t){var n=e.commit,o=e.dispatch;n("setWakeLockDuration",t),localStorage.setItem(_.DURATION,t),o("startWL")},loadSettings:function(e){var t=e.commit,n=localStorage.getItem(_.HUE),o=localStorage.getItem(_.LIGHTNESS),s=localStorage.getItem(_.DURATION);n&&!isNaN(n)&&t("setHue",k()(n),10),o&&!isNaN(o)&&t("setLightness",k()(o,10)),s&&!isNaN(s)&&t("setWakeLockDuration",k()(s,10))},initWL:function(e){var t=e.commit,n=e.dispatch;"getWakeLock"in navigator?navigator.getWakeLock("screen").then(function(e){var o=e,s=o.createRequest();t("setWakeLock",o),t("setWakeLockRequest",s),t("setWakeLockStatus","WakeLock OK"),console.debug("getWakeLock success",o),s&&n("cancelWL")}).catch(function(e){console.log("Could not obtain wake lock",e)}):(console.debug("getWakeLock not supported"),t("setWakeLockStatus","WakeLock not supported"))},cancelWL:function(e){var t=e.state,n=e.commit,o=window.setTimeout(function(){t.wakeLockRequest.cancel(),n("setWakeLockRequest",null),console.debug("wakelock cancelled")},60*t.wakeLockDuration*1e3);n("setWakeLockTimeOut",o)},startWL:function(e){var t=e.state,n=e.commit,o=e.dispatch;t.wakeLockRequest&&t.wakeLockTimeOut?(window.clearTimeout(t.wakeLockTimeOut),n("setWakeLockRequest",t.wakeLock.createRequest()),t.wakeLockRequest&&o("cancelWL")):o("initWL")}}}),N=j,R=n("ce5b"),$=n.n(R),q=(n("bf40"),n("9483"));Object(q["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),o["default"].use($.a),o["default"].config.productionTip=!1,"serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js").then(function(){console.log("Service Worker Registered!")}),new o["default"]({render:function(e){return e(T)},store:N}).$mount("#app")},"5af7":function(e,t,n){"use strict";var o=n("c012"),s=n.n(o);s.a},c012:function(e,t,n){}});
//# sourceMappingURL=app.e710708a.js.map