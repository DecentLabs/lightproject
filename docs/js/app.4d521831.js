(function(e){function t(t){for(var o,i,r=t[0],c=t[1],u=t[2],k=0,f=[];k<r.length;k++)i=r[k],s[i]&&f.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},s={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("1356"),s=n.n(o);s.a},1356:function(e,t,n){},"36ee":function(e,t,n){"use strict";var o=n("f90e"),s=n.n(o);s.a},"56d7":function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("div",{ref:"main",style:{backgroundColor:e.bgColor},attrs:{id:"app"},on:{touchstart:e.onStart,touchmove:e.onMove,touchend:e.onTouch}}),n("p",[e._v(e._s(e.wakeLockStatus))]),n("settings")],1)},a=[],i=n("cebc"),r=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{ref:"settings",staticClass:"form-wrapper"},[n("form",[n("v-label",{attrs:{dark:e.isDark}},[e._v("wakelock time limit")]),n("v-slider",{attrs:{"thumb-label":"always","thumb-size":22,dark:e.isDark,max:"30"},model:{value:e.wakeLockDuration,callback:function(t){e.wakeLockDuration=t},expression:"wakeLockDuration"}})],1),e.isSettingVisible?n("v-btn",{attrs:{depressed:"",round:"",large:"",dark:!e.isDark},on:{click:function(t){return e.showSettings(!1)}}},[e._v("hide settings\n  ")]):e._e(),e.isSettingVisible?e._e():n("v-btn",{attrs:{depressed:"",round:"",large:"",dark:!e.isDark},on:{click:function(t){return e.showSettings(!0)}}},[e._v("show settings\n  ")]),e.isFullScreen?e._e():n("v-btn",{attrs:{depressed:"",fab:"",large:"",dark:!e.isDark},on:{click:e.startLight}},[e._v("start\n  ")])],1)},u=[],l=n("e814"),k=n.n(l),f={name:"app",data:function(){return{isSettingVisible:!0,isFullScreen:!1}},computed:{wakeLockDuration:{get:function(){return this.$store.state.wakeLockDuration},set:function(e){this.$store.dispatch("saveWakeLockDuration",e)}},isDark:function(){return k()(this.$store.state.lightness,10)<40}},methods:{startLight:function(){this.showSettings(!1),this.setFullScreen()},setFullScreen:function(){document.fullscreenElement||document.webkitFullscreenElement?document.exitFullscreen():(document.body.requestFullscreen(),this.isFullScreen=!0)},showSettings:function(e){var t=this.$refs.settings;if(e)t.style.transform="translateY(0)";else{var n=t.querySelector("form");t.style.transform="translateY(".concat(-1*n.clientHeight+20,"px)")}this.isSettingVisible=e}}},h=f,d=(n("36ee"),n("2877")),g=n("6544"),p=n.n(g),v=n("8336"),m=n("a523"),L=n("24c9"),b=n("ba0d"),w=Object(d["a"])(h,c,u,!1,null,"b9635970",null),S=w.exports;p()(w,{VBtn:v["a"],VContainer:m["a"],VLabel:L["a"],VSlider:b["a"]});var W={name:"app",components:{settings:S},data:function(){return{startX:0,startY:0,isFaded:!1}},computed:Object(i["a"])({},Object(r["b"])(["hue","lightness","wakeLockDuration","wakeLockStatus"]),{bgColor:function(){return this.$store.getters.bgColor}}),methods:{onStart:function(e){this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY},onMove:function(e){var t=this.$store.state.hue,n=this.$store.state.lightness,o=e.changedTouches[0].clientY,s=e.changedTouches[0].clientX,a=Math.abs(o-this.startY),i=Math.abs(s-this.startX);a>0&&i<10&&(o<this.startY?(console.debug("up"),n+=.2*a):(console.debug("down"),n-=.2*a)),i>0&&a<10&&(s>this.startX?t+=.2*i:t-=.2*i),this.startY=o,this.startX=s,this.$store.dispatch("saveHue",t),this.$store.dispatch("saveLightness",n)},onTouch:function(){this.shine(),this.startWL()},startWL:function(){this.$store.dispatch("startWL"),this.fade()},fade:function(){var e=this;window.setTimeout(function(){e.$store.commit("setLightness",.8*e.lightness),e.isFaded=!0,console.log("fade")},.8*this.wakeLockDuration*60*1e3)},shine:function(){this.$refs.main.style.opacity=1,this.isFaded=!1}},mounted:function(){this.$store.dispatch("loadSettings")}},y=W,D=(n("034f"),n("7496")),O=Object(d["a"])(y,s,a,!1,null,null,null),T=O.exports;p()(O,{VApp:D["a"]});var _={DURATION:"light-duration",HUE:"light-hue",LIGHTNESS:"light-lightness"};o["default"].use(r["a"]);var $=new r["a"].Store({state:{wakeLock:null,wakeLockStatus:"",wakeLockDuration:30,wakeLockRequest:null,wakeLockTimeOut:null,hue:46,lightness:70},getters:{bgColor:function(e){return"hsl(".concat(e.hue,", 100%, ").concat(e.lightness,"%)")}},mutations:{setWakeLock:function(e,t){e.wakeLock=t},setWakeLockRequest:function(e,t){e.wakeLockRequest=t},setWakeLockStatus:function(e,t){e.wakeLockStatus=t},setWakeLockDuration:function(e,t){e.wakeLockDuration=t},setHue:function(e,t){e.hue=t},setLightness:function(e,t){e.lightness=t},setWakeLockTimeOut:function(e,t){e.wakeLockTimeOut=t}},actions:{saveHue:function(e,t){var n=e.commit;n("setHue",t),localStorage.setItem(_.HUE,t)},saveLightness:function(e,t){var n=e.commit;n("setLightness",t),localStorage.setItem(_.LIGHTNESS,t)},saveWakeLockDuration:function(e,t){var n=e.commit,o=e.dispatch;n("setWakeLockDuration",t),localStorage.setItem(_.DURATION,t),o("startWL")},loadSettings:function(e){var t=e.commit,n=localStorage.getItem(_.HUE),o=localStorage.getItem(_.LIGHTNESS),s=localStorage.getItem(_.DURATION);n&&!isNaN(n)&&t("setHue",n),o&&!isNaN(o)&&t("setLightness",o),s&&!isNaN(s)&&t("setWakeLockDuration",s)},initWL:function(e){var t=e.commit,n=e.dispatch;"getWakeLock"in navigator?navigator.getWakeLock("screen").then(function(e){var o=e,s=o.createRequest();t("setWakeLock",o),t("setWakeLockRequest",s),t("setWakeLockStatus","WakeLock OK"),console.debug("getWakeLock success",o),s&&n("cancelWL")}).catch(function(e){console.log("Could not obtain wake lock",e)}):(console.debug("getWakeLock not supported"),t("setWakeLockStatus","WakeLock not supported"))},cancelWL:function(e){var t=e.state,n=e.commit,o=window.setTimeout(function(){t.wakeLockRequest.cancel(),n("setWakeLockRequest",null),console.debug("wakelock cancelled")},60*t.wakeLockDuration*1e3);n("setWakeLockTimeOut",o)},startWL:function(e){var t=e.state,n=e.commit,o=e.dispatch;t.wakeLockRequest&&t.wakeLockTimeOut?(window.clearTimeout(t.wakeLockTimeOut),n("setWakeLockRequest",t.wakeLock.createRequest()),t.wakeLockRequest&&o("cancelWL")):o("initWL")}}}),j=$,N=n("ce5b"),R=n.n(N),q=(n("bf40"),n("9483"));Object(q["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),o["default"].use(R.a),o["default"].config.productionTip=!1;var F=!0,x="serviceWorker"in navigator&&F;x&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("Service Worker Registered!")}),new o["default"]({render:function(e){return e(T)},store:j}).$mount("#app")},f90e:function(e,t,n){}});
//# sourceMappingURL=app.4d521831.js.map