(function(t){function e(e){for(var o,i,r=e[0],c=e[1],u=e[2],k=0,f=[];k<r.length;k++)i=r[k],s[i]&&f.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},s={app:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("1356"),s=n.n(o);s.a},1356:function(t,e,n){},"520f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("div",{ref:"main",style:{backgroundColor:t.bgColor},attrs:{id:"app"},on:{touchstart:t.onStart,touchmove:t.onMove,touchend:t.onTouch}}),n("p",[t._v(t._s(t.wakeLockStatus))]),n("settings")],1)},a=[],i=n("cebc"),r=n("2f62"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{ref:"settings",staticClass:"form-wrapper"},[n("form",[n("v-label",{attrs:{dark:t.isDark}},[t._v("wakelock time limit")]),n("v-slider",{attrs:{"thumb-label":"always","thumb-size":22,dark:t.isDark,max:"30"},model:{value:t.wakeLockDuration,callback:function(e){t.wakeLockDuration=e},expression:"wakeLockDuration"}})],1),t.isSettingVisible?n("v-btn",{attrs:{depressed:"",round:"",large:"",dark:!t.isDark},on:{click:function(e){return t.showSettings(!1)}}},[t._v("hide settings\n  ")]):t._e(),t.isSettingVisible?t._e():n("v-btn",{attrs:{depressed:"",round:"",large:"",dark:!t.isDark},on:{click:function(e){return t.showSettings(!0)}}},[t._v("show settings\n  ")]),t.isSettingVisible?n("v-btn",{attrs:{depressed:"",fab:"",large:"",dark:!t.isDark},on:{click:t.startLight}},[t._v("start\n  ")]):t._e()],1)},u=[],l=n("e814"),k=n.n(l),f={name:"app",data:function(){return{isSettingVisible:!0}},computed:{wakeLockDuration:{get:function(){return this.$store.state.wakeLockDuration},set:function(t){this.$store.dispatch("saveWakeLockDuration",t)}},isDark:function(){return k()(this.$store.state.lightness,10)<40}},methods:{startLight:function(){this.showSettings(!1),this.setFullScreen()},setFullScreen:function(){document.fullscreenElement||document.webkitFullscreenElement?document.exitFullscreen():document.body.requestFullscreen()},showSettings:function(t){var e=this.$refs.settings;if(t)e.style.transform="translateY(0)";else{var n=e.querySelector("form");e.style.transform="translateY(".concat(-1*n.clientHeight+20,"px)")}this.isSettingVisible=t}}},h=f,d=(n("b4de"),n("2877")),g=n("6544"),p=n.n(g),m=n("8336"),L=n("a523"),v=n("24c9"),b=n("ba0d"),w=Object(d["a"])(h,c,u,!1,null,"0572ca62",null),S=w.exports;p()(w,{VBtn:m["a"],VContainer:L["a"],VLabel:v["a"],VSlider:b["a"]});var W={name:"app",components:{settings:S},data:function(){return{startX:0,startY:0,isFaded:!1}},computed:Object(i["a"])({},Object(r["b"])(["hue","wakeLockDuration","wakeLockStatus"]),{bgColor:function(){return this.$store.getters.bgColor}}),methods:{onStart:function(t){this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY},onMove:function(t){var e=this.$store.state.hue,n=this.$store.state.lightness,o=t.changedTouches[0].clientY,s=t.changedTouches[0].clientX,a=Math.abs(o-this.startY),i=Math.abs(s-this.startX);a>0&&i<10&&(o<this.startY?(console.debug("up"),n+=.2*a):(console.debug("down"),n-=.2*a)),i>0&&a<10&&(s>this.startX?e+=.2*i:e-=.2*i),this.startY=o,this.startX=s,this.$store.dispatch("saveHue",e),this.$store.dispatch("saveLightness",n)},onTouch:function(){this.shine(),this.startWL()},startWL:function(){this.$store.dispatch("startWL"),this.fade()},fade:function(){var t=this;window.setTimeout(function(){t.$refs.main.style.opacity=.7,t.isFaded=!0},.8*this.wakeLockDuration*60*1e3)},shine:function(){this.$refs.main.style.opacity=1,this.isFaded=!1}},mounted:function(){this.$store.dispatch("loadSettings")}},y=W,D=(n("034f"),n("7496")),O=Object(d["a"])(y,s,a,!1,null,null,null),T=O.exports;p()(O,{VApp:D["a"]});var _={DURATION:"light-duration",HUE:"light-hue",LIGHTNESS:"light-lightness"};o["default"].use(r["a"]);var $=new r["a"].Store({state:{wakeLock:null,wakeLockStatus:"",wakeLockDuration:30,wakeLockRequest:null,wakeLockTimeOut:null,hue:46,lightness:70},getters:{bgColor:function(t){return"hsl(".concat(t.hue,", 100%, ").concat(t.lightness,"%)")}},mutations:{setWakeLock:function(t,e){t.wakeLock=e},setWakeLockRequest:function(t,e){t.wakeLockRequest=e},setWakeLockStatus:function(t,e){t.wakeLockStatus=e},setWakeLockDuration:function(t,e){t.wakeLockDuration=e},setHue:function(t,e){t.hue=e},setLightness:function(t,e){t.lightness=e},setWakeLockTimeOut:function(t,e){t.wakeLockTimeOut=e}},actions:{saveHue:function(t,e){var n=t.commit;n("setHue",e),localStorage.setItem(_.HUE,e)},saveLightness:function(t,e){var n=t.commit;n("setLightness",e),localStorage.setItem(_.LIGHTNESS,e)},saveWakeLockDuration:function(t,e){var n=t.commit;n("setWakeLockDuration",e),localStorage.setItem(_.DURATION,e)},loadSettings:function(t){var e=t.commit,n=localStorage.getItem(_.HUE),o=localStorage.getItem(_.LIGHTNESS),s=localStorage.getItem(_.DURATION);n&&!isNaN(n)&&e("setHue",n),o&&!isNaN(o)&&e("setLightness",o),s&&!isNaN(s)&&e("setWakeLockDuration",s)},initWL:function(t){var e=t.commit,n=t.dispatch;"getWakeLock"in navigator?navigator.getWakeLock("screen").then(function(t){var o=t,s=o.createRequest();e("setWakeLock",o),e("setWakeLockRequest",s),e("setWakeLockStatus","WakeLock OK"),console.debug("getWakeLock success",o),s&&n("cancelWL")}).catch(function(t){console.log("Could not obtain wake lock",t)}):(console.debug("getWakeLock not supported"),e("setWakeLockStatus","WakeLock not supported"))},cancelWL:function(t){var e=t.state,n=t.commit,o=window.setTimeout(function(){e.wakeLockRequest.cancel(),n("setWakeLockRequest",null),console.debug("wakelock cancelled")},60*e.wakeLockDuration*1e3);n("setWakeLockTimeOut",o)},startWL:function(t){var e=t.state,n=t.commit,o=t.dispatch;e.wakeLockRequest&&e.wakeLockTimeOut?(window.clearTimeout(e.wakeLockTimeOut),n("setWakeLockRequest",e.wakeLock.createRequest()),e.wakeLockRequest&&o("cancelWL")):o("initWL")}}}),R=$,q=n("ce5b"),j=n.n(q);n("bf40");o["default"].use(j.a),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(T)},store:R}).$mount("#app")},b4de:function(t,e,n){"use strict";var o=n("520f"),s=n.n(o);s.a}});
//# sourceMappingURL=app.49a0c45c.js.map